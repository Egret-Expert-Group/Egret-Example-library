var Main=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var r=(__define,t),s=r.prototype;return s.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/silver.res.json","resource/")},s.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},s.onResourceLoadComplete=function(e){"preload"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},s.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},s.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},s.onResourceProgress=function(e){"preload"==e.groupName},s.createGameScene=function(){var e=this.createBitmapByName("bg_png");this.addChild(e);var t=this.stage.stageWidth,r=this.stage.stageHeight;e.width=t,e.height=r;var s=this.createBitmapByName("normalTree_png");this.addChild(s),s.y=this.height/2-s.height/2,s.x=this.stage.stageWidth/2-s.width/2,s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rainHandler,this);var i=RES.getRes("leaftexiao_png"),n=RES.getRes("leaftexiao_json");this.systemLeaf=new particle.GravityParticleSystem(i,n),this.addChild(this.systemLeaf),this.systemLeaf.start(),this.rainHandler(null)},s.rainHandler=function(e){if(null==this._rainParticle){var t=RES.getRes("silver_png"),r=RES.getRes("silverRain_json");this._rainParticle=new particle.GravityParticleSystem(t,r),this.addChild(this._rainParticle)}this._rainParticle.start(1e3)},s.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e);return t.texture=r,t},t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");