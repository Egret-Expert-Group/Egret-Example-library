var Main=function(t){function e(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var a=(__define,e),n=a.prototype;return n.onAddToStage=function(t){var e=new egret.ImageLoader;e.once(egret.Event.COMPLETE,this.imgLoadHandler,this),e.load("resource/cartoon-egret_01_small.png")},n.imgLoadHandler=function(t){var e=this;this._txInfo=new egret.TextField,this.addChild(this._txInfo),this._txInfo.size=28,this._txInfo.textAlign=egret.HorizontalAlign.LEFT,this._txInfo.textColor=0,this._txInfo.type=egret.TextFieldType.DYNAMIC,this._txInfo.lineSpacing=6,this._txInfo.multiline=!0,this._txInfo.text="屏幕分为两个小区域，上方是画面变换区域，下方是截屏显示区域。\n轻触屏幕进行截屏！",this._txInfo.x=50,this._txInfo.width=this.stage.stageWidth-100,this._txInfo.y=50;var a=this._txInfo.x+this._txInfo.height+L.GAP_UNIFIED;L.W_CLIP=this.stage.stageWidth-2*L.GAP_UNIFIED,L.H_CLIP=(this.stage.stageHeight-(a+2*L.GAP_UNIFIED))/2,this._rectClip=new egret.Rectangle(0,0,L.W_CLIP,L.H_CLIP);t.currentTarget.data;this._contMotion=new egret.Sprite,this._contMotion.x=L.GAP_UNIFIED,this._contMotion.y=a,this.addChild(this._contMotion),console.log(this._txInfo.y);var n=(Math.floor(255*Math.random())<<16)+(Math.floor(255*Math.random())<<8)+Math.floor(255*Math.random()),i=new egret.Shape;i.graphics.beginFill(n),i.graphics.drawRect(0,0,L.W_CLIP,L.H_CLIP),i.graphics.endFill(),i.cacheAsBitmap=!0,this._contMotion.addChild(i),this._contMotion.mask=this._rectClip,this._vcBird=new Array;for(var h=0;24>h;++h){var o=new MotionBMP(t.currentTarget.data);o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,o.x=L.W_CLIP*Math.random(),o.y=L.H_CLIP*Math.random(),o.scaleX=o.scaleY=.5,o.vx=Math.random()>.7?(1+3*Math.random())*(Math.random()>.5?1:-1):0,o.vy=Math.random()>.7?(1+3*Math.random())*(Math.random()>.5?1:-1):0,o.va=(1+3*Math.random())*(Math.random()>.5?1:-1),this._contMotion.addChild(o),this._vcBird.push(o)}this._bmpSnap=new egret.Bitmap,this._bmpSnap.x=L.GAP_UNIFIED,this._bmpSnap.y=this._contMotion.y+L.H_CLIP+L.GAP_UNIFIED,this.addChild(this._bmpSnap),this._shapeSnapEffect=new egret.Shape,this._shapeSnapEffect.graphics.beginFill(16777215),this._shapeSnapEffect.graphics.drawRect(0,0,L.W_CLIP,L.H_CLIP),this._shapeSnapEffect.graphics.endFill(),this._shapeSnapEffect.cacheAsBitmap=!0,this._shapeSnapEffect.x=this._bmpSnap.x,this._shapeSnapEffect.y=this._bmpSnap.y,this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log("take!");var t=new egret.RenderTexture;t.drawToTexture(e._contMotion,e._rectClip),e._bmpSnap.texture=t,e.addChild(e._shapeSnapEffect),e._shapeSnapEffect.alpha=1,egret.Tween.get(e._shapeSnapEffect).to({alpha:0},500).call(function(){e._shapeSnapEffect.parent&&e._shapeSnapEffect.parent.removeChild(e._shapeSnapEffect)})},this),this.addEventListener(egret.Event.ENTER_FRAME,function(){for(var t=e._vcBird.length-1;t>-1;--t){var a=e._vcBird[t],n=a.x+a.vx;n>L.W_CLIP?n=0:0>n&&(n=L.W_CLIP),a.x=n;var i=a.y+a.vy;i>L.H_CLIP?i=0:0>i&&(i=L.H_CLIP),a.y=i,a.rotation+=a.va}},this)},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var MotionBMP=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var a=(__define,e);a.prototype;return e}(egret.Bitmap);egret.registerClass(MotionBMP,"MotionBMP");var L=function(){function t(){}var e=(__define,t);e.prototype;return t.GAP_UNIFIED=50,t}();egret.registerClass(L,"L");