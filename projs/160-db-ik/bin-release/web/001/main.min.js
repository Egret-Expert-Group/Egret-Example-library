var Main=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/resource.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.loadGroup("TestArmature")},n.onResourceLoadComplete=function(e){"TestArmature"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),this.createGameScene())},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.createGameScene=function(){this.createMotorcycleExp()},n.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},n.createMotorcycleExp=function(){this.container=new egret.DisplayObjectContainer,this.addChild(this.container),this.container.x=250,this.container.y=350,this.drawText();var e=RES.getRes("skeleton_json"),t=RES.getRes("texture_json"),i=RES.getRes("texture_png"),n=new dragonBones.EgretFactory;n.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(e)),n.addTextureAtlas(new dragonBones.EgretTextureAtlas(i,t)),this.armature=n.buildArmature("Bicycle"),this.armatureDisplay=this.armature.getDisplay(),dragonBones.WorldClock.clock.add(this.armature),this.container.addChild(this.armatureDisplay),this.armatureDisplay.x=100,this.armatureDisplay.y=500,this.armatureDisplay.scaleX=.5,this.armatureDisplay.scaleY=.5,this.actionFlag=0,this.armature.animation.gotoAndPlay("bicycle"),egret.startTick(this.onTicker,this)},n.onTicker=function(e){this._time||(this._time=e);var t=e,i=t-this._time;return this._time=t,dragonBones.WorldClock.clock.advanceTime(i/1e3),!1},n.drawText=function(){this._txInfo=new egret.TextField,this.addChild(this._txInfo),this._txInfo.size=28,this._txInfo.x=50,this._txInfo.y=50,this._txInfo.textAlign=egret.HorizontalAlign.LEFT,this._txInfo.textColor=0,this._txInfo.type=egret.TextFieldType.DYNAMIC,this._txInfo.lineSpacing=6,this._txInfo.multiline=!0,this._txInfo.text="默认播放IK动画",this._bgInfo=new egret.Shape,this.addChildAt(this._bgInfo,this.numChildren-1),this._bgInfo.x=this._txInfo.x,this._bgInfo.y=this._txInfo.y,this._bgInfo.graphics.clear(),this._bgInfo.graphics.beginFill(16777215,.5),this._bgInfo.graphics.drawRect(0,0,this._txInfo.width,this._txInfo.height),this._bgInfo.graphics.endFill()},t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");