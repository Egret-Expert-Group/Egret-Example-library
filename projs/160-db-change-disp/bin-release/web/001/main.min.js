var Main=function(t){function e(){t.call(this),this._armature=null,this.status=!0,this.c1=["m_121005_F_S_png","m_121005_F_L1_png","m_121005_F_L2_png","m_121005_F_R1_png","m_121005_F_R2_png"],this.c2=["m_121011_F_S_png","m_121011_F_L1_png","m_121011_F_L2_png","m_121011_F_R1_png","m_121011_F_R2_png"],this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var n=(__define,e),o=n.prototype;return o.onAddToStage=function(t){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},o.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},o.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},o.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},o.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},o.createGameScene=function(){this.drawText();var t=RES.getRes("man_json"),e=RES.getRes("texture_json"),n=RES.getRes("texture_png"),o=new dragonBones.EgretFactory;o.addSkeletonData(dragonBones.DataParser.parseDragonBonesData(t)),o.addTextureAtlas(new dragonBones.EgretTextureAtlas(n,e));var s=o.buildArmature("man");s.animation.gotoAndPlay("runFront",0,-1,0),dragonBones.WorldClock.clock.add(s),this._armature=s,egret.startTick(this.dbrun,this),this._armature.display.x=300,this._armature.display.y=500,this.addChild(this._armature.display),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.click,this)},o.dbrun=function(t){return dragonBones.WorldClock.clock.advanceTime(.01),!0},o.click=function(t){this.status?this.setCloth(this.c1):this.setCloth(this.c2),this.status=!this.status},o.setCloth=function(t){this.setNewSlot("Ayifu",t[0]),this.setNewSlot("Axiuzi11",t[1]),this.setNewSlot("Axiuzi21",t[2]),this.setNewSlot("Axiuzi12",t[3]),this.setNewSlot("Axiuzi22",t[4])},o.setNewSlot=function(t,e){var n=this._armature.getSlot(t),o=new egret.Bitmap;o.texture=RES.getRes(e),o.x=n.display.x,o.y=n.display.y,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,n.setDisplay(o)},o.drawText=function(){this._txInfo=new egret.TextField,this.addChild(this._txInfo),this._txInfo.size=28,this._txInfo.x=50,this._txInfo.y=50,this._txInfo.textAlign=egret.HorizontalAlign.LEFT,this._txInfo.textColor=0,this._txInfo.type=egret.TextFieldType.DYNAMIC,this._txInfo.lineSpacing=6,this._txInfo.multiline=!0,this._txInfo.text="点击舞台可换装",this._bgInfo=new egret.Shape,this.addChildAt(this._bgInfo,this.numChildren-1),this._bgInfo.x=this._txInfo.x,this._bgInfo.y=this._txInfo.y,this._bgInfo.graphics.clear(),this._bgInfo.graphics.beginFill(16777215,.5),this._bgInfo.graphics.drawRect(0,0,this._txInfo.width,this._txInfo.height),this._bgInfo.graphics.endFill()},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");