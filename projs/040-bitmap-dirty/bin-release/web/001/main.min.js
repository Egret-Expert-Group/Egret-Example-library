var Main=function(t){function i(){t.call(this),this.once(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(i,t);var o=(__define,i),e=o.prototype;return e.onAddToStage=function(t){var i=new egret.ImageLoader;i.once(egret.Event.COMPLETE,this.imgLoadHandler,this),i.load("resource/cartoon-egret_01_small.png")},e.imgLoadHandler=function(t){var o=this,e=t.currentTarget.data,n=e.width/2,s=e.height/2;this._rectScope=new egret.Rectangle(n*i.SCALE_BASE,s*i.SCALE_BASE,this.stage.stageWidth-n*i.SCALE_BASE*2,this.stage.stageHeight-s*i.SCALE_BASE*2),this._vcBird=new Array;for(var h=0;h<i.NUM;++h){var c=new egret.Bitmap(e);c.anchorOffsetX=n,c.anchorOffsetY=s,c.x=this._rectScope.x+this._rectScope.width*Math.random(),c.y=this._rectScope.y+this._rectScope.height*Math.random(),c.scaleX=c.scaleY=i.SCALE_BASE,this._vcBird.push(c),this.addChild(c)}this._txInfo=new egret.TextField,this.addChild(this._txInfo),this._txInfo.size=28,this._txInfo.x=50,this._txInfo.y=50,this._txInfo.width=this.stage.stageWidth-100,this._txInfo.textAlign=egret.HorizontalAlign.LEFT,this._txInfo.textColor=0,this._txInfo.type=egret.TextFieldType.DYNAMIC,this._txInfo.lineSpacing=6,this._txInfo.multiline=!0,this._txInfo.touchEnabled=!0,this._txInfo.text="轻触以改变运动的小鸟及运动模式，观察不同的小鸟变化对应的脏矩形变化",this._bgInfo=new egret.Shape,this.addChild(this._bgInfo),this._bgInfo.x=this._txInfo.x,this._bgInfo.y=this._txInfo.y,this._bgInfo.graphics.clear(),this._bgInfo.graphics.beginFill(16777215,.5),this._bgInfo.graphics.drawRect(0,0,this._txInfo.width,this._txInfo.height),this._bgInfo.graphics.endFill(),this._bgInfo.cacheAsBitmap=!0,this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){o.planRdmMotion()},this),this.planRdmMotion(),this._nScaleBase=0,this.stage.addEventListener(egret.Event.ENTER_FRAME,function(t){switch(o._iMotionMode){case MotionMode.ROT:o._vcBird[o._vcMotion[0]].rotation+=3,o._vcBird[o._vcMotion[1]].rotation-=3,o._vcBird[o._vcMotion[2]].rotation+=3;var e=i.SCALE_BASE+Math.abs(Math.sin(o._nScaleBase+=.03))*i.SCALE_RANGE;o._vcBird[o._vcMotion[0]].scaleX=o._vcBird[o._vcMotion[0]].scaleY=e,o._vcBird[o._vcMotion[1]].scaleX=o._vcBird[o._vcMotion[1]].scaleY=e,o._vcBird[o._vcMotion[2]].scaleX=o._vcBird[o._vcMotion[2]].scaleY=e;break;case MotionMode.MOV:var n;(n=o._vcBird[o._vcMotion[0]].x-3)<o._rectScope.left&&(n=o._rectScope.right),o._vcBird[o._vcMotion[0]].x=n,(n=o._vcBird[o._vcMotion[1]].x+3)>o._rectScope.right&&(n=o._rectScope.left),o._vcBird[o._vcMotion[1]].x=n,(n=o._vcBird[o._vcMotion[2]].x-3)<o._rectScope.left&&(n=o._rectScope.right),o._vcBird[o._vcMotion[2]].x=n}},this)},e.planRdmMotion=function(){this._iMotionMode=Math.random()>.5?0:1,this._vcMotion&&3==this._vcMotion.length&&(this._vcBird[this._vcMotion[0]].scaleX=this._vcBird[this._vcMotion[0]].scaleY=i.SCALE_BASE,this._vcBird[this._vcMotion[1]].scaleX=this._vcBird[this._vcMotion[1]].scaleY=i.SCALE_BASE,this._vcBird[this._vcMotion[2]].scaleX=this._vcBird[this._vcMotion[2]].scaleY=i.SCALE_BASE),this.setChildIndex(this._txInfo,this.numChildren-1),this.setChildIndex(this._bgInfo,this.numChildren-2),this._vcMotion=new Array,this._vcMotion.push(Math.floor(i.NUM*Math.random())),this._vcMotion.push(Math.floor(i.NUM*Math.random())),this._vcMotion.push(Math.floor(i.NUM*Math.random())),this.setChildIndex(this._vcBird[this._vcMotion[0]],this.numChildren-3),this.setChildIndex(this._vcBird[this._vcMotion[1]],this.numChildren-4),this.setChildIndex(this._vcBird[this._vcMotion[2]],this.numChildren-5)},i.NUM=32,i.SCALE_BASE=.5,i.SCALE_RANGE=.5,i}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var MotionMode=function(){function t(){}var i=(__define,t);i.prototype;return t.ROT=0,t.MOV=1,t}();egret.registerClass(MotionMode,"MotionMode");