var Main=function(t){function e(){t.call(this),this._pauseTime=30,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var s=(__define,e),i=s.prototype;return i.onAddToStage=function(t){this.loadSound()},i.loadSound=function(){var t=this._sound=new egret.Sound;t.addEventListener(egret.Event.COMPLETE,function(t){this.init()},this),t.load("resource/assets/ccnn.mp3")},i.play=function(){this._channel=this._sound.play(this._pauseTime,1),this._channel.addEventListener(egret.Event.SOUND_COMPLETE,this.onComplete,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onTimeUpdate,this)},i.stop=function(){this._channel&&(this._channel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onComplete,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onTimeUpdate,this),this._channel.stop(),this._channel=null)},i.onComplete=function(t){console.log("播放完成"),this.stop(),this.setAllAbled(!1),this.setProgress(0)},i.onTimeUpdate=function(t){var e=this._channel?this._channel.position:0;this.setProgress(e)},i.setProgress=function(t){this._updateTxt.text=t.toFixed(1)+"/"+this._sound.length.toFixed(1);var e=t/this._sound.length*400;this._bar.x=e+this.stage.stageWidth/2-200;var s=this._progress.mask||new egret.Rectangle(0,0,0,60);s.x=e,s.width=400-e,this._progress.mask=s},i.init=function(){var t=180,e=200,s=this._playTxt=new egret.TextField;s.text="播放",s.size=60,s.x=80,s.y=200+e,s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.play(),this.setAllAbled(!0)},this),this.addChild(s);var i=this._stopTxt=new egret.TextField;i.text="停止",i.size=60,i.x=s.x+1*t,i.y=200+e,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this._channel&&(this._pauseTime=0,this.stop(),this.onTimeUpdate()),this.setAllAbled(!1)},this),this.addChild(i);var h=this._pauseTxt=new egret.TextField;h.text="暂停",h.size=60,h.x=s.x+2*t,h.y=200+e,h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this._channel&&(this._pauseTime=this._channel.position,this.stop()),this.setAllAbled(!1)},this),this.addChild(h),this.setAllAbled(!1);var n=new egret.Shape;this.addChild(n),n.x=this.stage.stageWidth/2-200,n.y=95+e,n.graphics.beginFill(10066329),n.graphics.drawRoundRect(0,0,400,10,5,5),n.graphics.endFill(),this._progress=new egret.Shape,this.addChild(this._progress),this._progress.x=this.stage.stageWidth/2-200,this._progress.y=95+e,this._progress.graphics.beginFill(16776960),this._progress.graphics.drawRoundRect(0,0,400,10,5,5),this._progress.graphics.endFill(),this._bar=new egret.Shape,this.addChild(this._bar),this._bar.x=this.stage.stageWidth/2-200,this._bar.y=100+e,this._bar.graphics.beginFill(16776960),this._bar.graphics.drawCircle(0,0,20),this._bar.graphics.endFill(),this._updateTxt=new egret.TextField,this._updateTxt.text="0/"+this._sound.length.toFixed(1),this._updateTxt.width=200,this._updateTxt.size=30,this._updateTxt.x=this.stage.stageWidth/2-100,this._updateTxt.y=50+e,this._updateTxt.textAlign=egret.HorizontalAlign.CENTER,this.addChild(this._updateTxt)},i.setAllAbled=function(t){this.setTextAbled(this._playTxt,!t),this.setTextAbled(this._stopTxt,t),this.setTextAbled(this._pauseTxt,t)},i.setTextAbled=function(t,e){t.touchEnabled=e,e?t.textColor=16777215:t.textColor=10066329},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");